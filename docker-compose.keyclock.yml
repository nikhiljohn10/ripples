version: '3.9'

services:
  keyclock:
    image: quay.io/keycloak/keycloak:19.0.1
    container_name: keyclock
    hostname: keyclock
    restart: unless-stopped
    volumes:
      - "./certs:/etc/ssl/certs/localhost"
    command: >
      start
        --optimized
        --https-port=8443
        --hostname=localhost
        --https-certificate-file=/etc/ssl/certs/localhost/cert.pem
        --https-certificate-key-file=/etc/ssl/certs/localhost/key.pem
    environment:
      DB_ADDR: postgres
      DB_DATABASE: keycloak
      DB_USER: admin
      DB_PASSWORD: Postgres1234
      KEYCLOAK_ADMIN: admin
      KEYCLOAK_ADMIN_PASSWORD: Keyclock@123
    ports:
      - 8443:8443
    networks:
      - docker-networks

networks:
  docker-networks:
    name: docker-networks